<!DOCTYPE html>
<html class="js" lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title id="page-title">Artist | Oro & Aquae</title>
    <meta name="description" content="Artist profile and works at Oro & Aquae Gallery.">
    <link rel="stylesheet" href="css/styles.css">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body x-data="artistPage()" class="relative flex flex-col min-h-screen bg-white text-black antialiased">
    
    <!-- Navigation Container (loaded dynamically) -->
    <div id="nav-container"></div>
    
    <!-- Skip to content link -->
    <a href="#main" class="skip-link">Skip to content</a>

    <!-- Main Content -->
    <main id="main">
        <!-- Loading State -->
        <div x-show="loading" class="loading-container">
            <p>Loading artist information...</p>
        </div>

        <!-- Error State -->
        <div x-show="error" class="error-container">
            <p>Artist not found. <a href="artists.html">Return to artists</a></p>
        </div>

        <!-- Artist Content -->
        <div x-show="!loading && !error && artist">
            <!-- Artist Hero Section -->
            <section class="artist-hero-section">
                <div class="container">
                    <div class="artist-hero-grid">
                        <!-- Artist Image -->
                        <div class="artist-hero-image">
                            <template x-if="artist && artist.artworks && artist.artworks.length > 0">
                                <img :src="artist.artworks[0].image" :alt="artist.name">
                            </template>
                            <template x-if="!artist || !artist.artworks || artist.artworks.length === 0">
                                <div class="placeholder-image" x-text="artist ? artist.name : ''"></div>
                            </template>
                        </div>

                        <!-- Artist Info -->
                        <div class="artist-hero-info">
                            <h1 x-text="artist ? artist.name : ''"></h1>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Artist Biography Section -->
            <section class="artist-biography-section">
                <div class="container">
                    <div class="biography-content">
                        <h2>Biography</h2>
                        <div x-html="artist ? artist.biography : ''"></div>
                    </div>
                </div>
            </section>

            <!-- Artist Artworks Section -->
            <section class="artist-artworks-section">
                <div class="container">
                    <h2>Artworks</h2>
                    
                    <!-- Show message if no artworks -->
                    <template x-if="!artist.artworks || artist.artworks.length === 0">
                        <div class="no-artworks-message">
                            <p>Artworks coming soon.</p>
                        </div>
                    </template>

                    <!-- Artworks Grid -->
                    <template x-if="artist.artworks && artist.artworks.length > 0">
                        <div class="artworks-grid">
                            <template x-for="(artwork, index) in artist.artworks" :key="index">
                                <article class="artwork-card">
                                    <div class="artwork-image">
                                        <img :src="artwork.image" :alt="artwork.title">
                                    </div>
                                    <div class="artwork-info">
                                        <h3 x-text="artwork.title"></h3>
                                        <p class="artwork-year" x-text="artwork.year"></p>
                                        <p class="artwork-medium" x-text="artwork.medium"></p>
                                        <p class="artwork-dimensions" x-text="artwork.dimensions"></p>
                                    </div>
                                </article>
                            </template>
                        </div>
                    </template>
                </div>
            </section>

            <!-- Other Artists Section -->
            <section class="related-artists-section">
                <div class="container">
                    <h2>Other Artists</h2>
                    <div class="related-artists-grid">
                        <template x-for="otherArtist in otherArtists" :key="otherArtist.id">
                            <a :href="'artist.html?id=' + otherArtist.id" class="related-artist-card">
                                <div class="related-artist-image">
                                    <img :src="otherArtist.thumbnailImage" :alt="otherArtist.name">
                                </div>
                                <h3 x-text="otherArtist.name"></h3>
                            </a>
                        </template>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script>
        function artistPage() {
            return {
                mobileMenu: false,
                loading: true,
                error: false,
                artist: null,
                allArtists: [],
                otherArtists: [],
                
                async init() {
                    await this.loadArtist();
                },
                
                async loadArtist() {
                    try {
                        // Get artist ID from URL
                        const urlParams = new URLSearchParams(window.location.search);
                        const artistId = urlParams.get('id');
                        
                        if (!artistId) {
                            this.error = true;
                            this.loading = false;
                            return;
                        }
                        
                        // Load artists data
                        const response = await fetch('data/artists.json');
                        const data = await response.json();
                        this.allArtists = data.artists;
                        
                        // Find the specific artist
                        this.artist = this.allArtists.find(a => a.id === artistId);
                        
                        if (!this.artist) {
                            this.error = true;
                            this.loading = false;
                            return;
                        }
                        
                        // Update page title
                        document.getElementById('page-title').textContent = `${this.artist.name} | Oro & Aquae`;
                        
                        // Get other artists (random 5-6, excluding current)
                        const otherArtistsList = this.allArtists.filter(a => a.id !== artistId);
                        const randomCount = Math.floor(Math.random() * 2) + 5; // Random 5 or 6
                        this.otherArtists = otherArtistsList
                            .sort(() => 0.5 - Math.random())
                            .slice(0, Math.min(randomCount, otherArtistsList.length));
                        
                        this.loading = false;
                    } catch (error) {
                        console.error('Error loading artist:', error);
                        this.error = true;
                        this.loading = false;
                    }
                }
            }
        }
    </script>

    <!-- Footer Container (loaded dynamically) -->
    <div id="footer-container"></div>
    
    <script src="js/nav-loader.js"></script>
    <script src="js/footer-loader.js"></script>
</body>
</html>
